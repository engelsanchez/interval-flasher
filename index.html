<!DOCTYPE html>
<html>
    <head>
        <script src="js/jquery-2.1.3.min.js"></script>
        <script src="js/underscore-min.js"></script>
        <style>
            * {font-family:verdana}
            span.interval-option {margin:4px 10px}
            div#interval-display {font-size:200px;text-align:center}
            div#controls {margin-top:15px; margin-bottom:15px}
            div#controls > span { display:inline-block;margin-left:15px;margin-right:15px}
        </style>
    </head>
    <body>
        <div id="interval-list"></div>
        <div id="controls">
            <span><button type="button" id="start-button">Start</button></span>
            <span><button type="button" id="stop-button">Stop</button></span>
            <span class="control-title">Time: 
                <input type="text" name="time-interval" id="time-interval" value="5"/>
            </span>
            </div>
            <div id="interval-display"></div>
            <script>
    var timer = null;
    var intervals = ["m2", "M2", "m3", "M3", "P4", "A4", "d5", "P5", "m6", "M6",
        "m7", "M7", "P8"];
    var intervalListDiv = $("#interval-list");
    intervals.forEach(function(interval){
        var idiv = $("<span>").addClass("interval-option");
        idiv.append($("<span>").addClass("interval-name").text(interval));
        idiv.append($("<input>")
                .addClass("interval-option").attr("type", "checkbox")
                .change(function(){
                    var interval = $("span.interval-name", $(this).parent()).text();
                    if ($(this).is(":checked")) {
                        intervals.push(interval);
                    } else {
                        intervals = _.without(intervals, interval);
                    }
                })
                .prop("checked", "checked"));
        idiv.appendTo(intervalListDiv);
    });

    function chooseNext() {
        var next_dir = _.random(1) ? "&uarr;" : "&darr;";
        var next_interval = intervals.length ?
            intervals[_.random(intervals.length-1)] + " " + next_dir: "";
        $("#interval-display").html(next_interval);
    }

    $("#start-button").click(function(){
        if (!timer) {
            var timeInterval = +$("#time-interval").val();
            chooseNext();
            timer = setInterval(chooseNext, timeInterval * 1000);
        }
    });
    $("#stop-button").click(function(){
        if (timer) {
            clearInterval(timer);
            timer = null;
        }
    });
            
        </script>
    </body>
</html>
